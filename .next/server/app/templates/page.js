(()=>{var e={};e.id=0,e.ids=[0],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},88370:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=a(50482),s=a(69108),l=a(62563),n=a.n(l),o=a(68300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(t,i);let d=["",{children:["templates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,40462)),"C:\\Users\\LENOVO\\Desktop\\Internship 2025\\whatsapp-business-dashboard\\src\\app\\templates\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,62620)),"C:\\Users\\LENOVO\\Desktop\\Internship 2025\\whatsapp-business-dashboard\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\LENOVO\\Desktop\\Internship 2025\\whatsapp-business-dashboard\\src\\app\\templates\\page.tsx"],p="/templates/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/templates/page",pathname:"/templates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},69846:(e,t,a)=>{Promise.resolve().then(a.bind(a,85030))},85030:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(95344),s=a(3729),l=a(94287);function n({template:e,onClose:t}){let[a,l]=(0,s.useState)(e.name),[n,o]=(0,s.useState)(e.category),[i,d]=(0,s.useState)(e.content),c=async()=>{await fetch(`http://localhost:5000/api/templates/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,category:n,content:i})}),t()};return r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[var(--surface)] p-6 rounded-xl w-[360px] border border-[var(--border)] shadow-xl",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4 text-[var(--text)]",children:"Edit Template"}),r.jsx("input",{className:"w-full p-2 mb-3 rounded border bg-[var(--surface-alt)]",value:a,onChange:e=>l(e.target.value)}),(0,r.jsxs)("select",{className:"w-full p-2 mb-3 rounded border bg-[var(--surface-alt)]",value:n,onChange:e=>o(e.target.value),children:[r.jsx("option",{children:"Marketing"}),r.jsx("option",{children:"Utility"}),r.jsx("option",{children:"OTP"})]}),r.jsx("textarea",{className:"w-full p-2 h-24 rounded border bg-[var(--surface-alt)]",value:i,onChange:e=>d(e.target.value)}),r.jsx("button",{onClick:c,className:"w-full mt-4 py-2 rounded bg-purple-500 text-white font-semibold",children:"Save Changes"})]})})}function o({template:e,onUpdated:t}){let[a,l]=(0,s.useState)(!1),o=async()=>{await fetch(`http://localhost:5000/api/templates/${e._id}`,{method:"DELETE"}),t()};return(0,r.jsxs)("div",{className:"p-4 rounded-xl bg-[var(--surface)] border border-[var(--border)] shadow hover:shadow-lg transition",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-md font-bold text-[var(--text)]",children:e.name}),r.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full text-white ${"Marketing"===e.category?"bg-emerald-600":"Utility"===e.category?"bg-blue-600":"bg-purple-600"}`,children:e.category})]}),r.jsx("p",{className:"mt-2 text-[var(--text-muted)] text-sm",children:e.content}),r.jsx("div",{className:"mt-3 p-3 bg-[var(--surface-alt)] rounded-xl text-sm border border-[var(--border)]",children:e.content.replace(/{{(.*?)}}/g,"\uD83D\uDFE6")}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[r.jsx("button",{onClick:()=>l(!0),className:"flex-1 px-3 py-1 bg-indigo-500 text-white rounded",children:"Edit"}),r.jsx("button",{onClick:o,className:"flex-1 px-3 py-1 bg-red-500 text-white rounded",children:"Delete"}),r.jsx("button",{onClick:async()=>{await fetch("http://localhost:5000/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name+" (Copy)",category:e.category,content:e.content,variables:e.variables||[]})}),t()},className:"flex-1 px-3 py-1 bg-gray-500 text-white rounded",children:"Duplicate"})]}),a&&r.jsx(n,{template:e,onClose:()=>{l(!1),t()}})]})}var i=a(37121),d=a(97075);let c=(0,d.Z)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),p=(0,d.Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);function u({isOpen:e,onClose:t}){let[a,l]=(0,s.useState)(""),[n,o]=(0,s.useState)("Marketing"),[d,u]=(0,s.useState)("");if(!e)return null;let x=async()=>{if(!a.trim()||!d.trim()){alert("Template name and message body are required.");return}await fetch("http://localhost:5000/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,category:n,content:d,variables:[]})}),t()};return r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:" bg-[var(--surface)] p-6 rounded-xl w-[380px]  border border-[var(--border)] shadow-2xl  animate-fadeIn ",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-5 text-[var(--text)] flex items-center gap-2",children:[r.jsx(i.Z,{size:20,className:"text-purple-500"}),"New Template"]}),(0,r.jsxs)("label",{className:"text-xs font-semibold text-[var(--text-muted)] flex items-center gap-1",children:[r.jsx(c,{size:12})," Template Name"]}),r.jsx("input",{className:" w-full p-2 mt-1 mb-4 rounded-lg  border border-[var(--border)]  bg-[var(--surface-alt)] text-[var(--text)] focus:ring-[var(--primary)] focus:ring-1 focus:outline-none ",placeholder:"Eg: Welcome Message",value:a,onChange:e=>l(e.target.value)}),r.jsx("label",{className:"text-xs font-semibold text-[var(--text-muted)]",children:"Category"}),(0,r.jsxs)("select",{className:" w-full p-2 mt-1 mb-4 rounded-lg  border border-[var(--border)]  bg-[var(--surface-alt)] text-[var(--text)] focus:ring-[var(--primary)] focus:ring-1 focus:outline-none ",value:n,onChange:e=>o(e.target.value),children:[r.jsx("option",{children:"Marketing"}),r.jsx("option",{children:"Utility"}),r.jsx("option",{children:"OTP"})]}),(0,r.jsxs)("label",{className:"text-xs font-semibold text-[var(--text-muted)] flex items-center gap-1",children:[r.jsx(p,{size:12})," Message Content"]}),r.jsx("textarea",{className:" w-full p-3 mt-1 h-28 rounded-lg  border border-[var(--border)]  bg-[var(--surface-alt)] text-[var(--text)] resize-none focus:ring-[var(--primary)]  focus:ring-1 focus:outline-none ",placeholder:"Write WhatsApp message here...  Use {{name}} or {{date}} as dynamic variables.",value:d,onChange:e=>u(e.target.value)}),r.jsx("p",{className:"text-xs font-semibold text-[var(--text-muted)] mt-4 mb-1",children:"Preview"}),r.jsx("div",{className:" p-3 rounded-xl bg-white border border-[var(--border)]  shadow-sm text-sm text-gray-900 whitespace-pre-wrap ",children:d||"Your message will appear here..."}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[r.jsx("button",{className:"px-4 py-2 rounded bg-gray-500 text-white hover:bg-gray-600",onClick:t,children:"Cancel"}),r.jsx("button",{className:" px-4 py-2 rounded  bg-gradient-to-r from-indigo-500 to-purple-500  text-white font-semibold shadow-md hover:opacity-90 ",onClick:x,children:"Save Template"})]})]})})}let x=(0,d.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function m({isOpen:e,onClose:t,onSave:a}){let[l,n]=(0,s.useState)("E-Commerce"),[o,i]=(0,s.useState)("Friendly"),[d,c]=(0,s.useState)(""),[p,u]=(0,s.useState)("single"),[m,h]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1);if(!e)return null;let v=async()=>{b(!0),h(null);try{let e=await fetch("/api/ai-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({industry:l,tone:o,details:d,mode:p})}),t=await e.json();if(console.log("AI RESPONSE:",t),!t.success){alert("AI Error: "+t.error),b(!1);return}h(t.output)}catch(e){console.error("FETCH ERROR:",e),alert("Failed to reach AI server")}b(!1)};return r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[var(--surface)] p-6 rounded-xl w-[480px] border border-[var(--border)] shadow-xl",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-[var(--text)] mb-4 flex gap-2",children:[r.jsx(x,{})," AI Template Generator"]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{onClick:()=>u("single"),className:`px-3 py-1 rounded-lg border ${"single"===p?"bg-purple-600 text-white":"bg-[var(--surface-alt)]"}`,children:"Single"}),r.jsx("button",{onClick:()=>u("multi"),className:`px-3 py-1 rounded-lg border ${"multi"===p?"bg-green-600 text-white":"bg-[var(--surface-alt)]"}`,children:"Multi (3 versions)"}),r.jsx("button",{onClick:()=>u("rewrite"),className:`px-3 py-1 rounded-lg border ${"rewrite"===p?"bg-blue-600 text-white":"bg-[var(--surface-alt)]"}`,children:"Rewrite"})]}),"rewrite"!==p&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("label",{className:"text-xs",children:"Industry"}),(0,r.jsxs)("select",{className:"w-full p-2 mb-3 rounded bg-[var(--surface-alt)]",value:l,onChange:e=>n(e.target.value),children:[r.jsx("option",{children:"E-Commerce"}),r.jsx("option",{children:"Banking/Finance"}),r.jsx("option",{children:"Healthcare"}),r.jsx("option",{children:"Education"}),r.jsx("option",{children:"Automobile"}),r.jsx("option",{children:"SaaS / Software"})]}),r.jsx("label",{className:"text-xs",children:"Tone"}),(0,r.jsxs)("select",{className:"w-full p-2 mb-3 rounded bg-[var(--surface-alt)]",value:o,onChange:e=>i(e.target.value),children:[r.jsx("option",{children:"Friendly"}),r.jsx("option",{children:"Professional"}),r.jsx("option",{children:"Promotional"}),r.jsx("option",{children:"Urgent"})]})]}),r.jsx("label",{className:"text-xs",children:"rewrite"===p?"Rewrite this:":"Describe:"}),r.jsx("textarea",{className:"w-full p-3 h-24 rounded bg-[var(--surface-alt)] mb-3",value:d,onChange:e=>c(e.target.value),placeholder:"rewrite"===p?"Paste your old message...":"Example: Promote 20% discount on electronics..."}),r.jsx("button",{onClick:v,className:"w-full py-2 rounded bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-semibold",children:g?"Generating...":"Generate"}),m&&(0,r.jsxs)("div",{className:"mt-5",children:[r.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Preview"}),"multi"===p?Array.isArray(m)?m.map((e,t)=>r.jsx("div",{className:"p-3 bg-green-500 text-white rounded-xl mb-2 whitespace-pre-wrap",children:e},t)):r.jsx("div",{className:"p-3 bg-red-500 text-white rounded-xl",children:"AI did not return multiple versions. Try again."}):r.jsx("div",{className:"p-3 bg-green-500 text-white rounded-xl whitespace-pre-wrap",children:m}),r.jsx("button",{onClick:()=>{"multi"===p?a(m[0]):a(m),t()},className:"w-full mt-4 py-2 rounded bg-emerald-600 text-white font-semibold",children:"Use This Template"})]})]})})}function h(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(""),[i,d]=(0,s.useState)("All"),[c,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),g=async()=>{try{let e=await (0,l.e8)();t(e)}catch(e){console.error("TEMPLATE LOAD ERROR:",e)}};(0,s.useEffect)(()=>{g()},[]);let b=e.filter(e=>{let t=e.name.toLowerCase().includes(a.toLowerCase())||(e.content||"").toLowerCase().includes(a.toLowerCase()),r="All"===i||e.category===i;return t&&r});return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("input",{className:"px-3 py-2 border rounded-lg w-56 bg-[var(--surface-alt)] text-[var(--text)]",placeholder:"Search templates...",value:a,onChange:e=>n(e.target.value)}),(0,r.jsxs)("select",{className:"px-3 py-2 border rounded-lg bg-[var(--surface-alt)] text-[var(--text)]",value:i,onChange:e=>d(e.target.value),children:[r.jsx("option",{value:"All",children:"All Categories"}),r.jsx("option",{value:"Marketing",children:"Marketing"}),r.jsx("option",{value:"Utility",children:"Utility"}),r.jsx("option",{value:"OTP",children:"OTP"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-md",children:"\uD83E\uDD16 AI Generate"}),r.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-md",children:"âž• New Template"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[b.map(e=>r.jsx(o,{template:e,onUpdated:g},e._id)),0===b.length&&r.jsx("p",{className:"text-[var(--text-muted)] text-sm mt-4",children:"No templates found."})]}),c&&r.jsx(u,{isOpen:c,onClose:()=>{p(!1),g()}}),x&&r.jsx(m,{isOpen:x,onClose:()=>h(!1),onSave:async e=>{try{await fetch("http://localhost:5000/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"AI Template",category:"Marketing",content:e})}),g()}catch(e){console.error("AI SAVE ERROR:",e)}}})]})}},40462:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(25036);let s=(0,a(86843).createProxy)(String.raw`C:\Users\LENOVO\Desktop\Internship 2025\whatsapp-business-dashboard\src\components\templates\TemplateList.tsx`),{__esModule:l,$$typeof:n}=s,o=s.default;function i(){return(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Templates Management"}),r.jsx(o,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,491,127],()=>a(88370));module.exports=r})();