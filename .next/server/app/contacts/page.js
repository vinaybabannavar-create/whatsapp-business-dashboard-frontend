(()=>{var e={};e.id=613,e.ids=[613],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},33247:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>i});var s=a(50482),r=a(69108),n=a(62563),l=a.n(n),o=a(68300),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(t,d);let i=["",{children:["contacts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,86796)),"C:\\Users\\LENOVO\\Desktop\\Internship 2025\\whatsapp-business-dashboard\\src\\app\\contacts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,62620)),"C:\\Users\\LENOVO\\Desktop\\Internship 2025\\whatsapp-business-dashboard\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\LENOVO\\Desktop\\Internship 2025\\whatsapp-business-dashboard\\src\\app\\contacts\\page.tsx"],x="/contacts/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/contacts/page",pathname:"/contacts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},81891:(e,t,a)=>{Promise.resolve().then(a.bind(a,32381))},32381:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(95344),r=a(5094),n=a(97075);let l=(0,n.Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var o=a(35851);let d=(0,n.Z)("notebook-pen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),i=(0,n.Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),c=(0,n.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var x=a(77385),u=a(67898),m=a(3729);let p=["VIP","Lead","Returning","New"];function h({isOpen:e,contact:t,onClose:a}){let r=(0,x.s)(e=>e.editContact),[n,l]=(0,m.useState)(""),[o,d]=(0,m.useState)(""),[i,c]=(0,m.useState)([]);if((0,m.useEffect)(()=>{t&&(l(t.name),d(t.phone_number),c(t.tags||[]))},[t]),!e||!t)return null;let u=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return s.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[999]",children:(0,s.jsxs)("div",{className:"bg-[var(--surface)] p-6 rounded-xl w-[330px] border border-[var(--border)] shadow-xl animate-fadeIn",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--text)] mb-4",children:"Edit Contact"}),s.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Name"}),s.jsx("input",{className:"w-full p-2 mb-3 rounded border border-[var(--border)] bg-[var(--surface-alt)] text-[var(--text)]",value:n,onChange:e=>l(e.target.value)}),s.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Phone Number"}),s.jsx("input",{className:"w-full p-2 mb-4 rounded border border-[var(--border)] bg-[var(--surface-alt)] text-[var(--text)]",value:o,onChange:e=>d(e.target.value)}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(e=>s.jsx("button",{onClick:()=>u(e),className:`
                  px-3 py-1 rounded-full text-xs font-semibold transition
                  ${i.includes(e)?"bg-gradient-to-r from-emerald-500 to-green-500 text-white":"bg-[var(--surface-alt)] border border-[var(--border)] text-[var(--text-muted)]"}
                `,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:a,className:"px-4 py-2 rounded bg-gray-500 text-white hover:bg-gray-600 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{if(!n.trim()||!o.trim()){alert("Name and phone are required.");return}r({...t,name:n.trim(),phone_number:o.trim(),tags:i}),a()},className:"px-4 py-2 rounded bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-md hover:opacity-90 transition",children:"Save Changes"})]})]})})}function b({contact:e,onClose:t}){let a=(0,x.s)(e=>e.deleteContact),n=(0,u.a)(e=>e.deleteChatByPhone),[p,b]=(0,m.useState)(!1),[g,v]=(0,m.useState)(e?.notes||"");if(!e)return null;let f=e.phone_number||"N/A",j=Array.isArray(e.tags)?e.tags:["N/A"],N=e=>"vip"===e.toLowerCase()?"bg-yellow-400 text-black":"lead"===e.toLowerCase()?"bg-blue-500 text-white":"returning"===e.toLowerCase()?"bg-purple-500 text-white":"bg-emerald-500 text-white";return(0,s.jsxs)("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-[900] flex justify-end",children:[(0,s.jsxs)("div",{className:"w-80 h-full bg-[var(--surface)] shadow-2xl border-l border-[var(--border)] animate-slideLeft p-6 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"font-semibold text-[var(--text)] text-sm",children:"Contact Details"}),s.jsx("button",{className:"text-[var(--text-muted)] hover:text-[var(--text)]",onClick:t,children:"âœ•"})]}),(0,s.jsxs)("div",{className:"relative mb-6",children:[s.jsx("div",{className:"h-16 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl"}),s.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2",children:s.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:(e=>{if(!e)return"U";let t=e.trim().split(" ");return 1===t.length?t[0][0]?.toUpperCase():(t[0][0]+t[1][0]).toUpperCase()})(e.name)})})]}),(0,s.jsxs)("div",{className:"mt-8 text-center mb-4",children:[s.jsx("p",{className:"text-lg font-bold text-[var(--text)]",children:e.name}),s.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:f})]}),(0,s.jsxs)("div",{className:"flex justify-center gap-4 mb-6",children:[s.jsx("button",{className:"p-2 rounded-xl bg-[var(--surface-alt)] hover:bg-[var(--surface)] shadow",children:s.jsx(l,{size:18,className:"text-green-500"})}),s.jsx("button",{className:"p-2 rounded-xl bg-[var(--surface-alt)] hover:bg-[var(--surface)] shadow",children:s.jsx(o.Z,{size:18,className:"text-blue-500"})}),s.jsx("button",{className:"p-2 rounded-xl bg-[var(--surface-alt)] hover:bg-[var(--surface)] shadow",children:s.jsx(d,{size:18,className:"text-emerald-500"})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("p",{className:"uppercase text-[10px] font-semibold text-[var(--text-muted)]",children:"Tags"}),s.jsx("div",{className:"flex gap-2 mt-2 flex-wrap",children:j.map((e,t)=>s.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-semibold ${N(e)}`,children:e},t))})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("p",{className:"uppercase text-[10px] font-semibold text-[var(--text-muted)]",children:"Created"}),s.jsx("p",{className:"mt-1 text-sm text-[var(--text)]",children:e.created_at})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("p",{className:"uppercase text-[10px] font-semibold text-[var(--text-muted)]",children:"Notes"}),s.jsx("textarea",{value:g,onChange:e=>v(e.target.value),className:"w-full mt-2 p-2 rounded-lg bg-[var(--surface-alt)] border border-[var(--border)] text-[var(--text)] resize-none h-20 focus:ring-1"})]}),s.jsx("div",{className:"border-t border-[var(--border)] my-4"}),(0,s.jsxs)("div",{className:"mt-auto flex flex-col gap-3",children:[(0,s.jsxs)(r.z,{className:"w-full bg-gradient-to-r from-indigo-500 to-purple-500 shadow-md hover:shadow-lg flex items-center gap-2",onClick:()=>b(!0),children:[s.jsx(i,{size:15})," Edit Contact"]}),(0,s.jsxs)("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg border border-red-500 text-red-500 font-semibold bg-white hover:bg-red-500 hover:text-white",onClick:async()=>{a(e.id),n(e.phone_number),await fetch(`http://localhost:5000/api/chats/${e.phone_number}`,{method:"DELETE"}),t()},children:[s.jsx(c,{size:16})," Delete Contact"]})]})]}),p&&s.jsx(h,{isOpen:p,contact:e,onClose:()=>b(!1)})]})}var g=a(94287),v=a(34755);function f({onSearch:e,onTagSelect:t}){let[a,r]=(0,m.useState)([]),[n,l]=(0,m.useState)(!0),o=async()=>{try{let e=await (0,g.a3)();r(e)}catch(e){v.Am.error("Failed to load tags")}finally{l(!1)}};return(0,m.useEffect)(()=>{o()},[]),(0,s.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[s.jsx("input",{placeholder:"Search contacts...",className:" bg-[var(--surface)]/50  backdrop-blur-md p-2 text-sm border border-[var(--border)]/60  rounded-lg w-44 text-[var(--text)] placeholder:text-[var(--text-muted)] focus:outline-none focus:ring-1 focus:ring-[var(--primary)] shadow-sm transition ",onChange:t=>e(t.target.value)}),(0,s.jsxs)("select",{className:" bg-[var(--surface)]/50  backdrop-blur-md p-2 text-sm  border border-[var(--border)]/60 rounded-lg text-[var(--text)] placeholder:text-[var(--text-muted)] focus:outline-none focus:ring-1 focus:ring-[var(--primary)] shadow-sm transition ",disabled:n,onChange:e=>t(e.target.value),children:[s.jsx("option",{value:"",children:"All tags"}),a.map(e=>s.jsx("option",{value:e,children:e},e))]})]})}function j(){let e=(0,x.s)(e=>e.contacts),t=(0,x.s)(e=>e.resetInvalidContacts),a=(0,x.s)(e=>e.deleteContact),[r,n]=(0,m.useState)([]),[l,o]=(0,m.useState)(null),d=e=>{if(!e||"string"!=typeof e)return"U";let t=e.trim().split(" ");return 1===t.length?t[0][0].toUpperCase():(t[0][0]+t[1][0]).toUpperCase()};(0,m.useEffect)(()=>{t()},[]),(0,m.useEffect)(()=>{n(e)},[e]);let u=e=>{switch(e.toLowerCase()){case"vip":return"bg-yellow-400 text-black";case"lead":return"bg-blue-500 text-white";case"returning":return"bg-purple-500 text-white";case"new":return"bg-emerald-500 text-white";default:return"bg-gray-400 text-white"}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:" bg-[var(--surface)]/60 backdrop-blur-xl border border-[var(--border)] rounded-2xl p-5  shadow-xl text-[var(--text)] transition-all ",children:[s.jsx("h3",{className:"text-sm font-semibold mb-4",children:"Contacts"}),s.jsx(f,{onSearch:t=>{n(e.filter(e=>e.name?.toLowerCase().includes(t.toLowerCase())))},onTagSelect:t=>{if(!t)return n(e);n(e.filter(e=>e.tags.includes(t)))}}),0===r.length&&s.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No contacts found."}),r.length>0&&s.jsx("div",{className:"divide-y divide-[var(--border)]",children:r.map(e=>(0,s.jsxs)("div",{className:" flex items-center justify-between px-3 py-3  rounded-xl cursor-pointer  hover:bg-[var(--surface-alt)] hover:shadow-md transition-all group ",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",onClick:()=>o(e),children:[s.jsx("div",{className:" h-11 w-11 rounded-xl  bg-gradient-to-br from-purple-500 to-blue-600  text-white flex items-center justify-center  font-semibold shadow-md ",children:d(e.name)}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:e.name||"Unknown"}),s.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:e.phone_number||"N/A"}),s.jsx("div",{className:"flex gap-1 mt-[2px]",children:e.tags?.map((e,t)=>s.jsx("span",{className:`text-[10px] px-2 py-[1px] rounded-full font-semibold ${u(e)}`,children:e},t))})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[s.jsx("p",{className:"text-[10px] text-[var(--text-muted)]",children:e.created_at?new Date(e.created_at).toLocaleDateString():""}),(0,s.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all mt-1",children:[s.jsx("button",{onClick:()=>o(e),className:" p-1 rounded-md bg-blue-500 text-white  hover:bg-blue-600 transition text-[10px] ",children:s.jsx(i,{size:14})}),s.jsx("button",{onClick:()=>a(e.id),className:" p-1 rounded-md bg-red-500 text-white  hover:bg-red-600 transition text-[10px] ",children:s.jsx(c,{size:14})})]})]})]},e.id))})]}),l&&s.jsx(b,{contact:l,onClose:()=>o(null)})]})}function N(){return(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--text)]",children:"Contacts Management"}),s.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"View, search, and filter your WhatsApp Business contacts."}),s.jsx("div",{className:" bg-[var(--surface)]/60  backdrop-blur-xl  border border-[var(--border)]  rounded-xl  p-4  shadow-lg ",children:s.jsx(j,{})})]})}},77385:(e,t,a)=>{"use strict";a.d(t,{s:()=>n});var s=a(43158),r=a(67023);let n=(0,s.Ue)()((0,r.tJ)((e,t)=>({contacts:[{id:"1",name:"John Doe",phone_number:"9876543210",tags:["VIP"],created_at:"2024-01-02"},{id:"2",name:"Priya Sharma",phone_number:"9988776655",tags:["Lead"],created_at:"2024-02-10"},{id:"3",name:"Rahul Kumar",phone_number:"9123456780",tags:["New"],created_at:"2024-03-18"}],addContact:(a,s)=>{let r=a.trim(),n=s.trim();if(!r||!n)return;if(t().contacts.some(e=>e.phone_number===n)){console.warn("Duplicate phone blocked:",n);return}let l={id:Date.now().toString(),name:r,phone_number:n,tags:["New"],created_at:new Date().toISOString().split("T")[0]};e({contacts:[...t().contacts,l]})},deleteContact:a=>e({contacts:t().contacts.filter(e=>e.id!==a)}),editContact:a=>e({contacts:t().contacts.map(e=>e.id===a.id?a:e)}),updateTags:(a,s)=>e({contacts:t().contacts.map(e=>e.id===a?{...e,tags:s}:e)}),resetInvalidContacts:()=>{e({contacts:t().contacts.filter(e=>"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.phone_number&&Array.isArray(e.tags))})},clearAll:()=>e({contacts:[]})}),{name:"wa-contacts",version:2}))},86796:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let s=(0,a(86843).createProxy)(String.raw`C:\Users\LENOVO\Desktop\Internship 2025\whatsapp-business-dashboard\src\app\contacts\page.tsx`),{__esModule:r,$$typeof:n}=s,l=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,491,755,795],()=>a(33247));module.exports=s})();