(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{71138:function(e,t,a){Promise.resolve().then(a.bind(a,23115))},23115:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(3827),r=a(64090),s=a(26587),i=a(94830),o=a(23356),l=a(22983),c=a(10166),d=a(43897),u=a(81433),h=a(78720),f=a(35618),x=a(98308),m=a(74994),j=a(83962),g=a(23351),p=a(87149),w=a(48463),v=a(94036),y=a(32355);function b(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{!async function(){t((await (0,y.fn)()).map((e,t)=>{var a,n,r;let s=(null===(a=e.stats)||void 0===a?void 0:a.sent)&&e.stats.sent>0?e.stats.sent:20+10*t+Math.floor(40*Math.random()),i=(null===(n=e.stats)||void 0===n?void 0:n.delivered)&&e.stats.delivered>0?e.stats.delivered:Math.floor(s*(.75+.15*Math.random())),o=(null===(r=e.stats)||void 0===r?void 0:r.read)&&e.stats.read>0?e.stats.read:Math.floor(i*(.3+.3*Math.random()));return{name:e.name,audience:e.audience||"other",schedule:e.schedule,status:e.status||"scheduled",totalSent:s,totalDelivered:i,totalFailed:s-i,totalRead:o}}))}()},[]);let a=["#10b981","#3b82f6","#f59e0b","#ef4444"],b=[{name:"New",value:e.filter(e=>"new"===e.audience).length},{name:"Returning",value:e.filter(e=>"returning"===e.audience).length},{name:"Premium",value:e.filter(e=>"premium"===e.audience).length},{name:"Other",value:e.filter(e=>!["new","returning","premium"].includes(e.audience)).length}],T=e.map(e=>({...e,score:Math.floor(e.totalDelivered/e.totalSent*100)}));return(0,n.jsxs)("div",{className:"p-6 space-y-10",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"Campaign Analytics"}),(0,n.jsx)("p",{className:"text-xs text-[var(--text-muted)]",children:"Visual insights from campaign performance data."})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsx)(E,{title:"Total Campaigns",value:e.length}),(0,n.jsx)(E,{title:"Avg Delivery Rate",value:e.length?Math.floor(e.reduce((e,t)=>e+t.totalDelivered/t.totalSent*100,0)/e.length)+"%":"0%"}),(0,n.jsx)(E,{title:"Completed",value:e.filter(e=>"completed"===e.status).length}),(0,n.jsx)(E,{title:"Failed",value:e.filter(e=>e.totalFailed>5).length})]}),(0,n.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,n.jsx)(N,{title:"Delivery Trend (%)",children:(0,n.jsx)(s.h,{width:"100%",height:300,children:(0,n.jsxs)(i.T,{data:T,children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"greenGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),(0,n.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),(0,n.jsx)(o.K,{dataKey:"name"}),(0,n.jsx)(l.B,{}),(0,n.jsx)(c.u,{}),(0,n.jsx)(d.u,{type:"monotone",dataKey:"score",stroke:"#10b981",fill:"url(#greenGrad)",strokeWidth:3})]})})}),(0,n.jsx)(N,{title:"Failed vs Delivered",children:(0,n.jsx)(s.h,{width:"100%",height:300,children:(0,n.jsxs)(u.v,{data:e,children:[(0,n.jsx)(o.K,{dataKey:"name"}),(0,n.jsx)(l.B,{}),(0,n.jsx)(c.u,{}),(0,n.jsx)(h.$,{dataKey:"totalDelivered",fill:"#10b981",radius:[6,6,0,0]}),(0,n.jsx)(h.$,{dataKey:"totalFailed",fill:"#ef4444",radius:[6,6,0,0]})]})})}),(0,n.jsx)(N,{title:"Audience Segment Distribution",children:(0,n.jsx)(s.h,{width:"100%",height:300,children:(0,n.jsxs)(f.u,{children:[(0,n.jsx)(x.b,{data:b,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:b.map((e,t)=>(0,n.jsx)(m.b,{fill:a[t]},t))}),(0,n.jsx)(c.u,{})]})})}),(0,n.jsx)(N,{title:"Campaign Performance Radar",children:(0,n.jsx)(s.h,{width:"100%",height:300,children:(0,n.jsxs)(j.H,{outerRadius:110,data:T,children:[(0,n.jsx)(g.n,{}),(0,n.jsx)(p.I,{dataKey:"name"}),(0,n.jsx)(w.S,{angle:30,domain:[0,100]}),(0,n.jsx)(v.F,{name:"Delivery %",dataKey:"score",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.5}),(0,n.jsx)(c.u,{})]})})})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,n.jsx)(k,{label:"Top Campaign",value:T.length?T.reduce((e,t)=>(e.score||0)>(t.score||0)?e:t).name:null}),(0,n.jsx)(k,{label:"Highest Failed",value:e.length?e.reduce((e,t)=>e.totalFailed>t.totalFailed?e:t).name:null}),(0,n.jsx)(k,{label:"Next Scheduled",value:function(e){let t=e.filter(e=>e.schedule);return t.length?t.sort((e,t)=>new Date(e.schedule).getTime()-new Date(t.schedule).getTime())[0].name:"None"}(e)})]})]})}function E(e){let{title:t,value:a}=e;return(0,n.jsxs)("div",{className:"bg-[var(--surface)] border border-[var(--border)] rounded-xl p-4 shadow",children:[(0,n.jsx)("p",{className:"text-xs text-[var(--text-muted)]",children:t}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:a})]})}function N(e){let{title:t,children:a}=e;return(0,n.jsxs)("div",{className:"bg-[var(--surface)] border border-[var(--border)] rounded-xl p-4 shadow",children:[(0,n.jsx)("h2",{className:"text-sm font-semibold mb-3",children:t}),a]})}function k(e){let{label:t,value:a}=e;return(0,n.jsxs)("div",{className:"bg-[var(--surface)] border border-[var(--border)] rounded-xl p-4 shadow",children:[(0,n.jsx)("p",{className:"text-xs text-[var(--text-muted)]",children:t}),(0,n.jsx)("p",{className:"text-sm mt-1 font-semibold",children:a||"No data"})]})}},32355:function(e,t,a){"use strict";a.d(t,{BJ:function(){return u},Bv:function(){return i},PZ:function(){return d},RH:function(){return m},Vu:function(){return r},a3:function(){return l},aO:function(){return o},e8:function(){return c},fn:function(){return x},ij:function(){return f},pq:function(){return s},u6:function(){return j},wR:function(){return h}});let n="https://whatsapp-business-dashboard.onrender.com/api";async function r(e){let t=await fetch("".concat(n,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Login failed");return t.json()}async function s(e,t){let a=await fetch("".concat(n,"/chats/").concat(e,"/messages/").concat(t,"/deleteForMe"),{method:"DELETE"});if(!a.ok)throw Error(await a.text());return a.json()}async function i(e,t){let a=await fetch("".concat(n,"/chats/").concat(e,"/messages/").concat(t,"/deleteForEveryone"),{method:"DELETE"});if(!a.ok)throw Error(await a.text());return a.json()}async function o(e){let t=await fetch("".concat(n,"/chats/").concat(e),{method:"DELETE"});if(!t.ok)throw Error(await t.text());return t.json()}async function l(){try{let e=await d(),t=new Set;return e.forEach(e=>{Array.isArray(e.tags)&&e.tags.forEach(e=>t.add(e))}),t.size?[...t]:["New","VIP","Lead","Returning"]}catch(e){return["New","VIP","Lead","Returning"]}}async function c(){let e=await fetch("".concat(n,"/templates"));if(!e.ok)throw Error(await e.text());return e.json()}async function d(){let e=await fetch("".concat(n,"/contacts"));if(!e.ok)throw Error(await e.text());return e.json()}async function u(e){let t=await fetch("".concat(n,"/chats/").concat(e,"/messages"));if(!t.ok)throw Error(await t.text());return t.json()}async function h(e,t){let a=await fetch("".concat(n,"/chats/").concat(e,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,from:"business"})});if(!a.ok)throw Error(await a.text());return a.json()}async function f(e,t){let a=new FormData;a.append("phone",e),a.append("file",t);let r=await fetch("".concat(n,"/chats/upload-file"),{method:"POST",body:a});if(!r.ok)throw Error(await r.text());return r.json()}async function x(){let e=await fetch("".concat(n,"/campaigns"));if(!e.ok)throw Error(await e.text());return e.json()}async function m(e){let t=await fetch("".concat(n,"/campaigns"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text());return t.json()}async function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Today",t=await fetch("".concat(n,"/analytics/dashboard?range=").concat(e));if(!t.ok)throw Error(await t.text());return t.json()}}},function(e){e.O(0,[234,385,971,69,744],function(){return e(e.s=71138)}),_N_E=e.O()}]);