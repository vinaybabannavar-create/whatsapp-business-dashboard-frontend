(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{21933:function(e,t,a){Promise.resolve().then(a.bind(a,38970))},38970:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var s=a(3827),r=a(64090),l=a(25007);function n(e){let{value:t,duration:a=800}=e,[l,n]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=(t-l)/(a/10),s=l,r=setInterval(()=>{s+=e,(e>0&&s>=t||e<0&&s<=t)&&(s=t,clearInterval(r)),n(Math.round(s))},10);return()=>clearInterval(r)},[t]),(0,s.jsx)("span",{children:l.toLocaleString()})}var d=a(69893);function o(e){let{label:t,value:a,icon:r,trend:o=[5,20,15,30,25,40,32]}=e,i=(0,d.H)(e=>e.darkMode);return(0,s.jsxs)("div",{className:" bg-[var(--surface)] border border-[var(--border)] rounded-xl p-5 shadow-sm hover:shadow-md transition-all duration-300 ",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-[var(--text-muted)]",children:t}),(0,s.jsx)("p",{className:"text-3xl font-bold mt-1 text-[var(--text)]",children:(0,s.jsx)(n,{value:a})})]}),(0,s.jsx)("div",{className:"text-[var(--primary)] text-3xl opacity-80",children:r})]}),(0,s.jsx)("div",{className:"mt-3 opacity-80",children:(0,s.jsx)(l.Sparklines,{data:o,height:30,width:80,children:(0,s.jsx)(l.SparklinesLine,{color:i?"#22c55e":"#16a34a",style:{strokeWidth:3}})})})]})}var i=a(26587),c=a(66363),x=a(38333),u=a(23356),m=a(22983),h=a(10166),b=a(98061);let p=[{label:"Mon",messages:120},{label:"Tue",messages:98},{label:"Wed",messages:150},{label:"Thu",messages:200},{label:"Fri",messages:180},{label:"Sat",messages:80},{label:"Sun",messages:60}];function v(e){let{data:t}=e,a=t&&t.length?t:p;return(0,s.jsx)("div",{className:"h-48 w-full",children:(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(c.w,{data:a,margin:{top:10,right:20,left:-10,bottom:0},children:[(0,s.jsx)(x.q,{strokeDasharray:"3 3",stroke:"#1e293b"}),(0,s.jsx)(u.K,{dataKey:"label",stroke:"#64748b",tick:{fontSize:12}}),(0,s.jsx)(m.B,{stroke:"#64748b",tick:{fontSize:12}}),(0,s.jsx)(h.u,{contentStyle:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",color:"white",fontSize:12},labelStyle:{fontSize:12,color:"#38bdf8"}}),(0,s.jsx)(b.x,{type:"monotone",dataKey:"messages",stroke:"#25D366",strokeWidth:2,dot:{stroke:"#25D366",strokeWidth:2,r:3},activeDot:{r:5}})]})})})}var g=a(78714),f=a(58787);function j(e){let{isOpen:t,onClose:a}=e,l=(0,g.s)(e=>e.addContact),n=(0,f.a)(e=>e.addChat),[d,o]=(0,r.useState)(""),[i,c]=(0,r.useState)("");return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[var(--surface)] p-6 rounded-xl w-80 border border-[var(--border)] shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4 text-[var(--text)]",children:"Add New Contact"}),(0,s.jsx)("input",{className:"w-full p-2 mb-3 rounded border border-[var(--border)] bg-[var(--surface-alt)] text-[var(--text)]",placeholder:"Enter name",value:d,onChange:e=>o(e.target.value)}),(0,s.jsx)("input",{className:"w-full p-2 mb-4 rounded border border-[var(--border)] bg-[var(--surface-alt)] text-[var(--text)]",placeholder:"Enter phone number",value:i,onChange:e=>c(e.target.value)}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-gray-500 text-white",onClick:a,children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-[var(--primary)] text-white",onClick:()=>{let e=d.trim(),t=i.trim();if(!e||!t){alert("Please enter name and phone number.");return}l(e,t),n({phone_number:t,name:e,last_message:"New contact added",last_time:"Just now",unread:0}),a(),o(""),c("")},children:"Save"})]})]})}):null}var N=a(34059),y=a(67366),w=a(6297),C=a(90684),k=a(32355),S=a(56288);function D(e){let{isOpen:t,onClose:a}=e;if(!t)return null;let[l,n]=(0,r.useState)(""),[d,o]=(0,r.useState)("all"),[i,c]=(0,r.useState)(""),[x,u]=(0,r.useState)(!1),m=async()=>{if(!l.trim()){S.Am.error("Campaign name required");return}u(!0);try{await (0,k.RH)({name:l,audience:d,schedule:i||null}),S.Am.success("Campaign created!"),a()}catch(e){S.Am.error("Failed to create campaign")}u(!1)};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl w-full max-w-md shadow-xl",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create New Campaign"}),(0,s.jsx)("label",{className:"text-sm font-medium",children:"Campaign Name"}),(0,s.jsx)("input",{className:"w-full px-3 py-2 border rounded-md mt-1 mb-3",placeholder:"Diwali Promo",value:l,onChange:e=>n(e.target.value)}),(0,s.jsx)("label",{className:"text-sm font-medium",children:"Audience"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border rounded-md mt-1 mb-3",value:d,onChange:e=>o(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"All Contacts"}),(0,s.jsx)("option",{value:"new",children:"New Customers"}),(0,s.jsx)("option",{value:"returning",children:"Returning Customers"}),(0,s.jsx)("option",{value:"vip",children:"VIP"})]}),(0,s.jsx)("label",{className:"text-sm font-medium",children:"Schedule (optional)"}),(0,s.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-md mt-1 mb-4",value:i,onChange:e=>c(e.target.value)}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,s.jsx)("button",{onClick:m,disabled:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x?"Creating...":"Create"})]})]})})}var _=a(47907),A=a(55228);let M=["Today","Week","Month"];function I(){var e,t,a,l;let n=(0,_.useRouter)(),[d,i]=(0,r.useState)(!1),[c,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)("Today"),[h,b]=(0,r.useState)(null),[p,S]=(0,r.useState)(!1),I=(0,g.s)(e=>e.contacts),{chats:T,setSelectedChat:E,selectedPhone:U,markAsRead:R}=(0,f.a)();(0,r.useEffect)(()=>{(async()=>{try{S(!0);let e=await (0,k.u6)();b(e)}catch(e){console.error("Failed to load dashboard stats:",e)}finally{S(!1)}})()},[]);let z=null!==(e=null==h?void 0:h.totalContacts)&&void 0!==e?e:I.length,O=null!==(t=null==h?void 0:h.activeChats)&&void 0!==t?t:T.length,P=null!==(a=null==h?void 0:h.campaigns)&&void 0!==a?a:0,W=null!==(l=null==h?void 0:h.messagesToday)&&void 0!==l?l:0,Z=(e,t)=>{E(e,t),R(e)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-2",children:[M.map(e=>(0,s.jsx)("button",{onClick:()=>m(e),className:"px-4 py-1 text-sm rounded-lg transition\n              ".concat(u===e?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-md":"bg-[var(--surface)] text-[var(--text-muted)] border border-[var(--border)]"),children:e},e)),p&&(0,s.jsx)("span",{className:"text-xs text-[var(--text-muted)] ml-2",children:"Updating…"})]}),(0,s.jsxs)("section",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsx)(o,{label:"Total Contacts",value:z,icon:(0,s.jsx)(N.Z,{})}),(0,s.jsx)(o,{label:"Active Chats",value:O,icon:(0,s.jsx)(y.Z,{})}),(0,s.jsx)(o,{label:"Campaigns",value:P,icon:(0,s.jsx)(w.Z,{})}),(0,s.jsx)(o,{label:"Messages Today",value:W,icon:(0,s.jsx)(C.Z,{})})]}),(0,s.jsxs)("div",{className:"bg-[var(--surface)] border border-[var(--border)] rounded-xl p-4 shadow",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold mb-2 text-[var(--text)]",children:"AI Insights"}),(0,s.jsxs)("p",{className:"text-xs text-[var(--text-muted)]",children:["\uD83D\uDCC8 Your chats increased by"," ",(0,s.jsx)("span",{className:"text-emerald-400 font-bold",children:"24%"}),"."]})]}),(0,s.jsxs)("section",{className:"flex flex-wrap gap-3 mt-2",children:[(0,s.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-sm font-semibold shadow-md",children:"➕ Add Contact"}),(0,s.jsx)("button",{onClick:()=>i(!0),className:"px-4 py-2 rounded-lg border border-emerald-400 text-emerald-400 hover:bg-emerald-500 hover:text-white transition text-sm",children:"\uD83D\uDCE2 New Campaign"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded-lg border border-blue-500 text-blue-400 hover:bg-blue-500 hover:text-white transition text-sm",children:"\uD83D\uDCDD New Template"}),(0,s.jsx)("button",{onClick:()=>n.push("/chats"),className:"px-4 py-2 rounded-lg border border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white transition text-sm",children:"\uD83D\uDCAC Open Chats"})]}),(0,s.jsxs)("section",{className:"grid md:grid-cols-[2fr,1fr] gap-6",children:[(0,s.jsxs)("div",{className:"bg-[var(--surface)] border border-[var(--border)] rounded-xl p-4",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold mb-3 text-[var(--text)]",children:"Message Analytics"}),(0,s.jsx)(v,{})," "]}),(0,s.jsxs)("div",{className:"bg-[var(--surface)] border border-[var(--border)] rounded-xl p-4",children:[(0,s.jsx)("h2",{className:"text-sm font-semibold mb-3 text-[var(--text)]",children:"Recent Activity"}),(0,s.jsxs)("ul",{className:"space-y-4 text-xs text-[var(--text-muted)] border-l pl-4 border-[var(--border)]",children:[(0,s.jsxs)("li",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-[-8px] top-1 h-3 w-3 bg-emerald-400 rounded-full"}),"New campaign launched."]}),(0,s.jsxs)("li",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-[-8px] top-1 h-3 w-3 bg-blue-400 rounded-full"}),"Replied to ",O," chats."]}),(0,s.jsxs)("li",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-[-8px] top-1 h-3 w-3 bg-pink-400 rounded-full"}),"Imported ",z," contacts."]})]})]})]}),(0,s.jsxs)("section",{className:"mt-4 bg-[var(--surface)] border border-[var(--border)] rounded-2xl p-4 shadow flex flex-col gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-[var(--text)]",children:"Live Chats"}),(0,s.jsx)("p",{className:"text-[11px] text-[var(--text-muted)]",children:"Manage conversations without leaving the dashboard."})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-[260px,1fr] gap-4 h-[420px]",children:[(0,s.jsxs)("div",{className:"flex flex-col bg-[var(--bg)] border border-[var(--border)] rounded-xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b border-[var(--border)] flex justify-between text-xs",children:[(0,s.jsx)("span",{className:"font-semibold text-[var(--text)]",children:"Conversations"}),(0,s.jsxs)("span",{className:"text-[var(--text-muted)]",children:[T.length," chats"]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[0===T.length&&(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-[11px] text-[var(--text-muted)]",children:"No chats yet."}),T.map(e=>{let t=e.phone_number===U;return(0,s.jsxs)("button",{onClick:()=>Z(e.phone_number,e.name),className:"w-full px-3 py-2.5 text-left flex gap-3 items-center border-b border-[var(--border)] text-xs \n                      ".concat(t?"bg-[var(--surface-alt)]":"hover:bg-[var(--surface-alt)]"),children:[(0,s.jsx)("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 text-white flex items-center justify-center",children:e.name.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-[var(--text)] truncate",children:e.name}),(0,s.jsx)("p",{className:"text-[11px] text-[var(--text-muted)] truncate",children:e.last_message})]}),e.unread>0&&(0,s.jsx)("span",{className:"min-w-[18px] h-[18px] rounded-full bg-emerald-500 text-white flex items-center justify-center text-[10px]",children:e.unread})]},e.phone_number)})]})]}),(0,s.jsx)(A.Z,{})]})]}),(0,s.jsx)(j,{isOpen:c,onClose:()=>x(!1)}),(0,s.jsx)(D,{isOpen:d,onClose:()=>i(!1)})]})}},78714:function(e,t,a){"use strict";a.d(t,{s:function(){return l}});var s=a(22020),r=a(65249);let l=(0,s.Ue)()((0,r.tJ)((e,t)=>({contacts:[{id:"1",name:"John Doe",phone_number:"9876543210",tags:["VIP"],created_at:"2024-01-02"},{id:"2",name:"Priya Sharma",phone_number:"9988776655",tags:["Lead"],created_at:"2024-02-10"},{id:"3",name:"Rahul Kumar",phone_number:"9123456780",tags:["New"],created_at:"2024-03-18"}],addContact:(a,s)=>{let r=a.trim(),l=s.trim();if(!r||!l)return;if(t().contacts.some(e=>e.phone_number===l)){console.warn("Duplicate phone blocked:",l);return}let n={id:Date.now().toString(),name:r,phone_number:l,tags:["New"],created_at:new Date().toISOString().split("T")[0]};e({contacts:[...t().contacts,n]})},deleteContact:a=>e({contacts:t().contacts.filter(e=>e.id!==a)}),editContact:a=>e({contacts:t().contacts.map(e=>e.id===a.id?a:e)}),updateTags:(a,s)=>e({contacts:t().contacts.map(e=>e.id===a?{...e,tags:s}:e)}),resetInvalidContacts:()=>{e({contacts:t().contacts.filter(e=>"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.phone_number&&Array.isArray(e.tags))})},clearAll:()=>e({contacts:[]})}),{name:"wa-contacts",version:2}))},69893:function(e,t,a){"use strict";a.d(t,{H:function(){return l}});var s=a(22020),r=a(65249);let l=(0,s.Ue)()((0,r.tJ)((e,t)=>({darkMode:!0,chatAlerts:!0,campaignUpdates:!0,systemNotifications:!1,status:"online",toggleDarkMode:()=>e({darkMode:!t().darkMode}),setDarkMode:t=>e({darkMode:t}),toggleChatAlerts:()=>e({chatAlerts:!t().chatAlerts}),toggleCampaignUpdates:()=>e({campaignUpdates:!t().campaignUpdates}),toggleSystemNotifications:()=>e({systemNotifications:!t().systemNotifications}),setStatus:t=>e({status:t})}),{name:"wa-ui"}))}},function(e){e.O(0,[381,288,234,318,228,971,69,744],function(){return e(e.s=21933)}),_N_E=e.O()}]);