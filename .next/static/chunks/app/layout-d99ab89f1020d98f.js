(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{32068:function(e,t,a){Promise.resolve().then(a.t.bind(a,73649,23)),Promise.resolve().then(a.bind(a,10989)),Promise.resolve().then(a.t.bind(a,63385,23))},10989:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var n=a(3827),r=a(8792),s=a(47907),o=a(64090),c=a(30880),l=a(69893),i=a(42527),d=a(34059),u=a(67366),h=a(46113),m=a(6297),f=a(69475),x=a(29910),p=a(37805),b=a(49108);let g=[{href:"/",label:"Dashboard",icon:i.Z},{href:"/contacts",label:"Contacts",icon:d.Z},{href:"/chats",label:"Chats",icon:u.Z},{href:"/campaigns",label:"Campaigns",icon:h.Z},{href:"/campaigns/analytics",label:"Analytics",icon:m.Z},{href:"/templates",label:"Templates",icon:f.Z},{href:"/settings",label:"Settings",icon:x.Z}];function w(){let e=(0,s.usePathname)(),{name:t}=(0,c.t)(),{status:a}=(0,l.H)(),[i,d]=(0,o.useState)(!1),u=(0,o.useMemo)(()=>"/"===e?"/":"/"+e.split("/")[1],[e]);return(0,n.jsxs)("aside",{className:"hidden md:flex flex-col \n        ".concat(i?"w-20":"w-64","\n        bg-[var(--surface)]/40 backdrop-blur-xl\n        border-r border-[var(--border)]\n        shadow-xl p-4 transition-all duration-300"),children:[(0,n.jsx)("button",{onClick:()=>d(!i),className:"absolute top-4 right-[-12px] p-1 rounded-full  bg-[var(--surface)] border border-[var(--border)] hover:bg-[var(--surface-alt)] shadow",children:i?(0,n.jsx)(p.Z,{size:18}):(0,n.jsx)(b.Z,{size:18})}),(0,n.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"h-14 w-14 flex items-center justify-center rounded-2xl text-xl font-bold text-white shadow-lg bg-gradient-to-br from-emerald-400 to-blue-600",children:(e=>{if(!e)return"U";let t=e.split(" ");return 1===t.length?t[0][0].toUpperCase():(t[0][0]+t[1][0]).toUpperCase()})(t)}),(0,n.jsx)("div",{className:"absolute bottom-0 right-0 h-4 w-4 rounded-full border-2 border-[var(--surface)]",style:{backgroundColor:{online:"#22c55e",active:"#3b82f6",idle:"#d1d5db",busy:"#ef4444"}[a]}})]}),!i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mt-3 text-sm font-semibold text-[var(--text)]",children:t||"User"}),(0,n.jsx)("p",{className:"text-[10px] text-[var(--text-muted)]",children:"Business Dashboard"})]})]}),(0,n.jsx)("nav",{className:"space-y-1 flex-1",children:g.map(e=>{let t=e.icon,a=u===e.href;return(0,n.jsxs)(r.default,{href:e.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all\n                ".concat(a?"bg-gradient-to-r from-emerald-500 to-green-500 text-white":"text-[var(--text-muted)] hover:bg-[var(--surface-alt)] hover:text-[var(--text)]"),children:[(0,n.jsx)(t,{size:20}),!i&&e.label]},e.href)})}),!i&&(0,n.jsxs)("div",{className:"mt-4 pt-4 border-t border-[var(--border)] text-xs text-[var(--text-muted)]",children:["Logged in as"," ",(0,n.jsx)("span",{className:"font-medium text-[var(--text)]",children:t})]})]})}var v=a(575),y=a(22169);let j=o.forwardRef((e,t)=>{let{checked:a=!1,onCheckedChange:r,className:s,...o}=e;return(0,n.jsxs)("button",{type:"button",role:"switch","aria-checked":a,onClick:()=>null==r?void 0:r(!a),className:(0,y.cn)("relative inline-flex h-5 w-9 items-center rounded-full transition-all duration-200",a?"bg-wa-accent":"bg-slate-700","border border-slate-600 hover:border-wa-accent/50","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-wa-accent","disabled:opacity-50 disabled:cursor-not-allowed",s),children:[(0,n.jsx)("span",{className:(0,y.cn)("inline-block h-4 w-4 rounded-full bg-slate-900 transform transition-all duration-200 shadow",a?"translate-x-4":"translate-x-1")}),(0,n.jsx)("input",{ref:t,...o,type:"checkbox",className:"hidden",checked:a,readOnly:!0})]})});j.displayName="Switch";var N=a(28670),k=a(52235),C=a(32355),E=a(58787);function P(){let[e,t]=(0,o.useState)(!1),[a,r]=(0,o.useState)(""),[c,l]=(0,o.useState)(!1),[i,m]=(0,o.useState)([]),[x,p]=(0,o.useState)([]),[b,g]=(0,o.useState)([]),[w,v]=(0,o.useState)([]),y=(0,s.useRouter)(),{setSelectedChat:j}=(0,E.a)();(0,o.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key.toLowerCase()&&(e.preventDefault(),t(!0)),"Escape"===e.key&&t(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,o.useEffect)(()=>{e&&t();async function t(){try{l(!0);let[e,t,a]=await Promise.all([(0,C.PZ)(),(0,C.fn)(),(0,C.e8)()]);m(e),p(t),g(a)}finally{l(!1)}}},[e]),(0,o.useEffect)(()=>{if(!a.trim()){v([]);return}let e=a.toLowerCase();v([...i.filter(t=>t.name.toLowerCase().includes(e)||t.phone_number.includes(a)).map(e=>({id:"contact-".concat(e.id),label:e.name,subtitle:e.phone_number,type:"contact",phoneNumber:e.phone_number})),...x.filter(t=>t.name.toLowerCase().includes(e)).map(e=>{var t,a;return{id:"campaign-".concat(e._id),label:e.name,subtitle:"".concat(e.status.toUpperCase()," • ").concat(null!==(a=null===(t=e.stats)||void 0===t?void 0:t.sent)&&void 0!==a?a:0," sent"),type:"campaign"}}),...b.filter(t=>t.name.toLowerCase().includes(e)).map(e=>({id:"template-".concat(e._id),label:e.name,subtitle:"".concat(e.category," • ").concat(e.language),type:"template"}))])},[a,i,x,b]);let P=e=>{"contact"===e.type&&e.phoneNumber?(j(e.phoneNumber,e.label),y.push("/chats")):"campaign"===e.type?y.push("/campaigns"):"template"===e.type&&y.push("/templates"),t(!1),r("")};return e?(0,n.jsx)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center bg-black/40 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"mt-24 w-full max-w-xl rounded-2xl bg-[var(--surface)] shadow-xl border border-[var(--border)]",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-[var(--border)]",children:[(0,n.jsx)(N.Z,{size:16,className:"text-[var(--text-muted)]"}),(0,n.jsx)("input",{autoFocus:!0,value:a,onChange:e=>r(e.target.value),placeholder:"Search contacts, campaigns, templates...",className:"flex-1 bg-transparent text-sm text-[var(--text)] outline-none"}),(0,n.jsx)("button",{onClick:()=>t(!1),className:"p-1 hover:bg-[var(--bg)] rounded-md",children:(0,n.jsx)(k.Z,{size:17,className:"text-[var(--text-muted)]"})})]}),(0,n.jsxs)("div",{className:"max-h-80 overflow-y-auto py-2",children:[c&&(0,n.jsx)("p",{className:"text-xs text-[var(--text-muted)] px-4 py-2",children:"Loading data…"}),!c&&a&&0===w.length&&(0,n.jsxs)("p",{className:"text-xs text-[var(--text-muted)] px-4 py-2",children:["No results found for ",(0,n.jsx)("b",{children:a})]}),!c&&w.map(e=>(0,n.jsxs)("button",{onClick:()=>P(e),className:"w-full px-4 py-2 flex items-center gap-3 text-left hover:bg-[var(--bg)] transition",children:[(0,n.jsxs)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center bg-gradient-to-br from-emerald-500 to-green-700 text-white",children:["contact"===e.type&&(0,n.jsx)(d.Z,{size:14}),"campaign"===e.type&&(0,n.jsx)(h.Z,{size:14}),"template"===e.type&&(0,n.jsx)(f.Z,{size:14})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"text-sm text-[var(--text)]",children:e.label}),e.subtitle&&(0,n.jsx)("p",{className:"text-[11px] text-[var(--text-muted)]",children:e.subtitle})]}),"contact"===e.type&&(0,n.jsxs)("span",{className:"flex items-center gap-1 text-[10px] text-[var(--text-muted)]",children:[(0,n.jsx)(u.Z,{size:12})," Open chat"]})]},e.id))]})]})}):null}let _={"/":"Dashboard","/contacts":"Contacts","/chats":"Chats","/campaigns":"Campaigns","/templates":"Templates","/settings":"Settings"};function S(){let e=(0,s.useRouter)(),t=(0,s.usePathname)(),{isAuthenticated:a,logout:r}=(0,c.t)(),{darkMode:o,toggleDarkMode:i}=(0,l.H)(),d=_["/"+((null==t?void 0:t.split("/")[1])||"")]||"Dashboard";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{}),(0,n.jsxs)("header",{className:" sticky top-0 z-50 w-full h-14 flex items-center justify-between px-4 md:px-6 bg-[var(--surface)]/40 backdrop-blur-xl border-b border-[var(--border)] text-[var(--text)] shadow-md ",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-lg font-semibold",children:d}),(0,n.jsx)("p",{className:"text-xs text-[var(--text-muted)] hidden sm:block",children:"Migrate WhatsApp Business Dashboard"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("button",{onClick:()=>window.dispatchEvent(new KeyboardEvent("keydown",{key:"k",ctrlKey:!0})),className:" hidden sm:flex items-center gap-2  px-3 py-1.5 rounded-full border border-[var(--border)] bg-[var(--surface)]/20 hover:bg-[var(--surface-alt)] transition text-[var(--text-muted)] ",children:[(0,n.jsx)(N.Z,{size:14}),(0,n.jsx)("span",{children:"Search…"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,n.jsx)("span",{className:"hidden sm:inline-block",children:"Dark mode"}),(0,n.jsx)(j,{checked:o,onCheckedChange:i})]}),a&&(0,n.jsx)(v.z,{size:"sm",variant:"outline",className:"border-[var(--border)] text-[var(--text)] hover:bg-[var(--surface-alt)]",onClick:()=>{r(),e.push("/login")},children:"Logout"})]})]})]})}function Z(e){let{children:t}=e;return(0,n.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,n.jsx)(w,{}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsx)(S,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto p-4 bg-[var(--background)]",children:t})]})]})}},575:function(e,t,a){"use strict";a.d(t,{z:function(){return l}});var n=a(3827),r=a(64090),s=a(22169);let o={primary:"bg-wa-primary text-white hover:bg-emerald-700 border border-wa-primary shadow-sm",outline:"border border-slate-700 text-slate-100 hover:bg-wa-surface hover:text-white",ghost:"text-slate-100 hover:bg-wa-surface hover:text-white border border-transparent"},c={sm:"h-8 px-3 text-sm",md:"h-9 px-4 text-sm"},l=r.forwardRef((e,t)=>{let{className:a="",variant:r="primary",size:l="md",...i}=e;return(0,n.jsx)("button",{ref:t,className:(0,s.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-wa-accent focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",o[r],c[l],a),...i})});l.displayName="Button"},32355:function(e,t,a){"use strict";a.d(t,{BJ:function(){return u},Bv:function(){return o},PZ:function(){return d},RH:function(){return x},Vu:function(){return r},a3:function(){return l},aO:function(){return c},e8:function(){return i},fn:function(){return f},ij:function(){return m},pq:function(){return s},u6:function(){return p},wR:function(){return h}});let n="https://whatsapp-business-dashboard.onrender.com/api";async function r(e){let t=await fetch("".concat(n,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Login failed");return t.json()}async function s(e,t){let a=await fetch("".concat(n,"/chats/").concat(e,"/messages/").concat(t,"/deleteForMe"),{method:"DELETE"});if(!a.ok)throw Error(await a.text());return a.json()}async function o(e,t){let a=await fetch("".concat(n,"/chats/").concat(e,"/messages/").concat(t,"/deleteForEveryone"),{method:"DELETE"});if(!a.ok)throw Error(await a.text());return a.json()}async function c(e){let t=await fetch("".concat(n,"/chats/").concat(e),{method:"DELETE"});if(!t.ok)throw Error(await t.text());return t.json()}async function l(){try{let e=await d(),t=new Set;return e.forEach(e=>{Array.isArray(e.tags)&&e.tags.forEach(e=>t.add(e))}),t.size?[...t]:["New","VIP","Lead","Returning"]}catch(e){return["New","VIP","Lead","Returning"]}}async function i(){let e=await fetch("".concat(n,"/templates"));if(!e.ok)throw Error(await e.text());return e.json()}async function d(){let e=await fetch("".concat(n,"/contacts"));if(!e.ok)throw Error(await e.text());return e.json()}async function u(e){let t=await fetch("".concat(n,"/chats/").concat(e,"/messages"));if(!t.ok)throw Error(await t.text());return t.json()}async function h(e,t){let a=await fetch("".concat(n,"/chats/").concat(e,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,from:"business"})});if(!a.ok)throw Error(await a.text());return a.json()}async function m(e,t){let a=new FormData;a.append("phone",e),a.append("file",t);let r=await fetch("".concat(n,"/chats/upload-file"),{method:"POST",body:a});if(!r.ok)throw Error(await r.text());return r.json()}async function f(){let e=await fetch("".concat(n,"/campaigns"));if(!e.ok)throw Error(await e.text());return e.json()}async function x(e){let t=await fetch("".concat(n,"/campaigns"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text());return t.json()}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Today",t=await fetch("".concat(n,"/analytics/dashboard?range=").concat(e));if(!t.ok)throw Error(await t.text());return t.json()}},22169:function(e,t,a){"use strict";function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{cn:function(){return n}})},30880:function(e,t,a){"use strict";a.d(t,{t:function(){return s}});var n=a(22020),r=a(65249);let s=(0,n.Ue)()((0,r.tJ)(e=>({token:null,userId:null,name:"User",email:"user@email.com",isAuthenticated:!0,setAuth:(t,a,n,r)=>e({token:t,userId:a,name:n,email:r,isAuthenticated:!0}),updateProfile:(t,a)=>e({name:t,email:a}),logout:()=>e({token:null,userId:null,name:null,email:null,isAuthenticated:!1})}),{name:"wa-auth"}))},58787:function(e,t,a){"use strict";a.d(t,{a:function(){return s}});var n=a(22020),r=a(65249);let s=(0,n.Ue)()((0,r.tJ)((e,t)=>({selectedPhone:null,selectedName:null,chats:[{phone_number:"9876543210",name:"John Doe",last_message:"Hi, I want to know more!",last_time:"10:01 AM",unread:2},{phone_number:"9988776655",name:"Priya Sharma",last_message:"Thanks for the info!",last_time:"Yesterday",unread:0},{phone_number:"9123456780",name:"Rahul Kumar",last_message:"Sure, I’ll check.",last_time:"Monday",unread:1}],addChat:a=>{let n=t().chats;n.some(e=>e.phone_number===a.phone_number)||e({chats:[...n,a]})},setChats:t=>e({chats:t}),updateChatPreview:(t,a,n)=>e(e=>({chats:e.chats.map(r=>r.phone_number===t?{...r,last_message:a,last_time:n,unread:e.selectedPhone===t?0:r.unread+1}:r)})),updateChatName:(t,a)=>e(e=>({chats:e.chats.map(e=>e.phone_number===t?{...e,name:a}:e),selectedName:e.selectedPhone===t?a:e.selectedName})),markAsRead:t=>e(e=>({chats:e.chats.map(e=>e.phone_number===t?{...e,unread:0}:e)})),setSelectedChat:(t,a)=>{if(!t||""===t.trim()){console.error("❌ ERROR: setSelectedChat called with EMPTY phone");return}e({selectedPhone:t,selectedName:a||"Unknown"})},deleteChatByPhone:t=>e(e=>({chats:e.chats.filter(e=>e.phone_number!==t),selectedPhone:e.selectedPhone===t?null:e.selectedPhone,selectedName:e.selectedPhone===t?null:e.selectedName})),clearChat:()=>e({selectedPhone:null,selectedName:null})}),{name:"wa-chats"}))},69893:function(e,t,a){"use strict";a.d(t,{H:function(){return s}});var n=a(22020),r=a(65249);let s=(0,n.Ue)()((0,r.tJ)((e,t)=>({darkMode:!0,chatAlerts:!0,campaignUpdates:!0,systemNotifications:!1,status:"online",toggleDarkMode:()=>e({darkMode:!t().darkMode}),setDarkMode:t=>e({darkMode:t}),toggleChatAlerts:()=>e({chatAlerts:!t().chatAlerts}),toggleCampaignUpdates:()=>e({campaignUpdates:!t().campaignUpdates}),toggleSystemNotifications:()=>e({systemNotifications:!t().systemNotifications}),setStatus:t=>e({status:t})}),{name:"wa-ui"}))},63385:function(){}},function(e){e.O(0,[381,729,971,69,744],function(){return e(e.s=32068)}),_N_E=e.O()}]);