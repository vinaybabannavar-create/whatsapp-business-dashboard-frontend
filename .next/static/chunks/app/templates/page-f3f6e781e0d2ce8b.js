(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{68888:function(e,t,a){Promise.resolve().then(a.bind(a,15460))},57977:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(64090);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),o=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:d="",children:u,iconNode:h,...x}=e;return(0,r.createElement)("svg",{ref:t,...c,width:n,height:n,stroke:a,strokeWidth:o?24*Number(s)/Number(n):s,className:l("lucide",d),...!u&&!i(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,r.forwardRef)((a,s)=>{let{className:i,...c}=a;return(0,r.createElement)(d,{ref:s,iconNode:t,className:l("lucide-".concat(n(o(e))),"lucide-".concat(e),i),...c})});return a.displayName=o(e),a}},69475:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(57977).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},15460:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(3827),n=a(64090),s=a(32355);function o(e){let{template:t,onClose:a}=e,[s,o]=(0,n.useState)(t.name),[l,i]=(0,n.useState)(t.category),[c,d]=(0,n.useState)(t.content),u=async()=>{await fetch("http://localhost:5000/api/templates/".concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,category:l,content:c})}),a()};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[var(--surface)] p-6 rounded-xl w-[360px] border border-[var(--border)] shadow-xl",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-[var(--text)]",children:"Edit Template"}),(0,r.jsx)("input",{className:"w-full p-2 mb-3 rounded border bg-[var(--surface-alt)]",value:s,onChange:e=>o(e.target.value)}),(0,r.jsxs)("select",{className:"w-full p-2 mb-3 rounded border bg-[var(--surface-alt)]",value:l,onChange:e=>i(e.target.value),children:[(0,r.jsx)("option",{children:"Marketing"}),(0,r.jsx)("option",{children:"Utility"}),(0,r.jsx)("option",{children:"OTP"})]}),(0,r.jsx)("textarea",{className:"w-full p-2 h-24 rounded border bg-[var(--surface-alt)]",value:c,onChange:e=>d(e.target.value)}),(0,r.jsx)("button",{onClick:u,className:"w-full mt-4 py-2 rounded bg-purple-500 text-white font-semibold",children:"Save Changes"})]})})}function l(e){let{template:t,onUpdated:a}=e,[s,l]=(0,n.useState)(!1),i=async()=>{await fetch("http://localhost:5000/api/templates/".concat(t._id),{method:"DELETE"}),a()};return(0,r.jsxs)("div",{className:"p-4 rounded-xl bg-[var(--surface)] border border-[var(--border)] shadow hover:shadow-lg transition",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-md font-bold text-[var(--text)]",children:t.name}),(0,r.jsx)("span",{className:"text-[10px] px-2 py-1 rounded-full text-white ".concat("Marketing"===t.category?"bg-emerald-600":"Utility"===t.category?"bg-blue-600":"bg-purple-600"),children:t.category})]}),(0,r.jsx)("p",{className:"mt-2 text-[var(--text-muted)] text-sm",children:t.content}),(0,r.jsx)("div",{className:"mt-3 p-3 bg-[var(--surface-alt)] rounded-xl text-sm border border-[var(--border)]",children:t.content.replace(/{{(.*?)}}/g,"\uD83D\uDFE6")}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,r.jsx)("button",{onClick:()=>l(!0),className:"flex-1 px-3 py-1 bg-indigo-500 text-white rounded",children:"Edit"}),(0,r.jsx)("button",{onClick:i,className:"flex-1 px-3 py-1 bg-red-500 text-white rounded",children:"Delete"}),(0,r.jsx)("button",{onClick:async()=>{await fetch("http://localhost:5000/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name+" (Copy)",category:t.category,content:t.content,variables:t.variables||[]})}),a()},className:"flex-1 px-3 py-1 bg-gray-500 text-white rounded",children:"Duplicate"})]}),s&&(0,r.jsx)(o,{template:t,onClose:()=>{l(!1),a()}})]})}var i=a(69475),c=a(57977);let d=(0,c.Z)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),u=(0,c.Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);function h(e){let{isOpen:t,onClose:a}=e,[s,o]=(0,n.useState)(""),[l,c]=(0,n.useState)("Marketing"),[h,x]=(0,n.useState)("");if(!t)return null;let p=async()=>{if(!s.trim()||!h.trim()){alert("Template name and message body are required.");return}await fetch("http://localhost:5000/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,category:l,content:h,variables:[]})}),a()};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:" bg-[var(--surface)] p-6 rounded-xl w-[380px]  border border-[var(--border)] shadow-2xl  animate-fadeIn ",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-5 text-[var(--text)] flex items-center gap-2",children:[(0,r.jsx)(i.Z,{size:20,className:"text-purple-500"}),"New Template"]}),(0,r.jsxs)("label",{className:"text-xs font-semibold text-[var(--text-muted)] flex items-center gap-1",children:[(0,r.jsx)(d,{size:12})," Template Name"]}),(0,r.jsx)("input",{className:" w-full p-2 mt-1 mb-4 rounded-lg  border border-[var(--border)]  bg-[var(--surface-alt)] text-[var(--text)] focus:ring-[var(--primary)] focus:ring-1 focus:outline-none ",placeholder:"Eg: Welcome Message",value:s,onChange:e=>o(e.target.value)}),(0,r.jsx)("label",{className:"text-xs font-semibold text-[var(--text-muted)]",children:"Category"}),(0,r.jsxs)("select",{className:" w-full p-2 mt-1 mb-4 rounded-lg  border border-[var(--border)]  bg-[var(--surface-alt)] text-[var(--text)] focus:ring-[var(--primary)] focus:ring-1 focus:outline-none ",value:l,onChange:e=>c(e.target.value),children:[(0,r.jsx)("option",{children:"Marketing"}),(0,r.jsx)("option",{children:"Utility"}),(0,r.jsx)("option",{children:"OTP"})]}),(0,r.jsxs)("label",{className:"text-xs font-semibold text-[var(--text-muted)] flex items-center gap-1",children:[(0,r.jsx)(u,{size:12})," Message Content"]}),(0,r.jsx)("textarea",{className:" w-full p-3 mt-1 h-28 rounded-lg  border border-[var(--border)]  bg-[var(--surface-alt)] text-[var(--text)] resize-none focus:ring-[var(--primary)]  focus:ring-1 focus:outline-none ",placeholder:"Write WhatsApp message here...  Use {{name}} or {{date}} as dynamic variables.",value:h,onChange:e=>x(e.target.value)}),(0,r.jsx)("p",{className:"text-xs font-semibold text-[var(--text-muted)] mt-4 mb-1",children:"Preview"}),(0,r.jsx)("div",{className:" p-3 rounded-xl bg-white border border-[var(--border)]  shadow-sm text-sm text-gray-900 whitespace-pre-wrap ",children:h||"Your message will appear here..."}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-gray-500 text-white hover:bg-gray-600",onClick:a,children:"Cancel"}),(0,r.jsx)("button",{className:" px-4 py-2 rounded  bg-gradient-to-r from-indigo-500 to-purple-500  text-white font-semibold shadow-md hover:opacity-90 ",onClick:p,children:"Save Template"})]})]})})}let x=(0,c.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function p(e){let{isOpen:t,onClose:a,onSave:s}=e,[o,l]=(0,n.useState)("E-Commerce"),[i,c]=(0,n.useState)("Friendly"),[d,u]=(0,n.useState)(""),[h,p]=(0,n.useState)("single"),[m,f]=(0,n.useState)(null),[g,b]=(0,n.useState)(!1);if(!t)return null;let w=async()=>{b(!0),f(null);try{let e=await fetch("/api/ai-template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({industry:o,tone:i,details:d,mode:h})}),t=await e.json();if(console.log("AI RESPONSE:",t),!t.success){alert("AI Error: "+t.error),b(!1);return}f(t.output)}catch(e){console.error("FETCH ERROR:",e),alert("Failed to reach AI server")}b(!1)};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[var(--surface)] p-6 rounded-xl w-[480px] border border-[var(--border)] shadow-xl",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-[var(--text)] mb-4 flex gap-2",children:[(0,r.jsx)(x,{})," AI Template Generator"]}),(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,r.jsx)("button",{onClick:()=>p("single"),className:"px-3 py-1 rounded-lg border ".concat("single"===h?"bg-purple-600 text-white":"bg-[var(--surface-alt)]"),children:"Single"}),(0,r.jsx)("button",{onClick:()=>p("multi"),className:"px-3 py-1 rounded-lg border ".concat("multi"===h?"bg-green-600 text-white":"bg-[var(--surface-alt)]"),children:"Multi (3 versions)"}),(0,r.jsx)("button",{onClick:()=>p("rewrite"),className:"px-3 py-1 rounded-lg border ".concat("rewrite"===h?"bg-blue-600 text-white":"bg-[var(--surface-alt)]"),children:"Rewrite"})]}),"rewrite"!==h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{className:"text-xs",children:"Industry"}),(0,r.jsxs)("select",{className:"w-full p-2 mb-3 rounded bg-[var(--surface-alt)]",value:o,onChange:e=>l(e.target.value),children:[(0,r.jsx)("option",{children:"E-Commerce"}),(0,r.jsx)("option",{children:"Banking/Finance"}),(0,r.jsx)("option",{children:"Healthcare"}),(0,r.jsx)("option",{children:"Education"}),(0,r.jsx)("option",{children:"Automobile"}),(0,r.jsx)("option",{children:"SaaS / Software"})]}),(0,r.jsx)("label",{className:"text-xs",children:"Tone"}),(0,r.jsxs)("select",{className:"w-full p-2 mb-3 rounded bg-[var(--surface-alt)]",value:i,onChange:e=>c(e.target.value),children:[(0,r.jsx)("option",{children:"Friendly"}),(0,r.jsx)("option",{children:"Professional"}),(0,r.jsx)("option",{children:"Promotional"}),(0,r.jsx)("option",{children:"Urgent"})]})]}),(0,r.jsx)("label",{className:"text-xs",children:"rewrite"===h?"Rewrite this:":"Describe:"}),(0,r.jsx)("textarea",{className:"w-full p-3 h-24 rounded bg-[var(--surface-alt)] mb-3",value:d,onChange:e=>u(e.target.value),placeholder:"rewrite"===h?"Paste your old message...":"Example: Promote 20% discount on electronics..."}),(0,r.jsx)("button",{onClick:w,className:"w-full py-2 rounded bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-semibold",children:g?"Generating...":"Generate"}),m&&(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsx)("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Preview"}),"multi"===h?Array.isArray(m)?m.map((e,t)=>(0,r.jsx)("div",{className:"p-3 bg-green-500 text-white rounded-xl mb-2 whitespace-pre-wrap",children:e},t)):(0,r.jsx)("div",{className:"p-3 bg-red-500 text-white rounded-xl",children:"AI did not return multiple versions. Try again."}):(0,r.jsx)("div",{className:"p-3 bg-green-500 text-white rounded-xl whitespace-pre-wrap",children:m}),(0,r.jsx)("button",{onClick:()=>{"multi"===h?s(m[0]):s(m),a()},className:"w-full mt-4 py-2 rounded bg-emerald-600 text-white font-semibold",children:"Use This Template"})]})]})})}function m(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(""),[i,c]=(0,n.useState)("All"),[d,u]=(0,n.useState)(!1),[x,m]=(0,n.useState)(!1),f=async()=>{try{let e=await (0,s.e8)();t(e)}catch(e){console.error("TEMPLATE LOAD ERROR:",e)}};(0,n.useEffect)(()=>{f()},[]);let g=e.filter(e=>{let t=e.name.toLowerCase().includes(a.toLowerCase())||(e.content||"").toLowerCase().includes(a.toLowerCase()),r="All"===i||e.category===i;return t&&r});return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsx)("input",{className:"px-3 py-2 border rounded-lg w-56 bg-[var(--surface-alt)] text-[var(--text)]",placeholder:"Search templates...",value:a,onChange:e=>o(e.target.value)}),(0,r.jsxs)("select",{className:"px-3 py-2 border rounded-lg bg-[var(--surface-alt)] text-[var(--text)]",value:i,onChange:e=>c(e.target.value),children:[(0,r.jsx)("option",{value:"All",children:"All Categories"}),(0,r.jsx)("option",{value:"Marketing",children:"Marketing"}),(0,r.jsx)("option",{value:"Utility",children:"Utility"}),(0,r.jsx)("option",{value:"OTP",children:"OTP"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-md",children:"\uD83E\uDD16 AI Generate"}),(0,r.jsx)("button",{onClick:()=>u(!0),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-md",children:"âž• New Template"})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[g.map(e=>(0,r.jsx)(l,{template:e,onUpdated:f},e._id)),0===g.length&&(0,r.jsx)("p",{className:"text-[var(--text-muted)] text-sm mt-4",children:"No templates found."})]}),d&&(0,r.jsx)(h,{isOpen:d,onClose:()=>{u(!1),f()}}),x&&(0,r.jsx)(p,{isOpen:x,onClose:()=>m(!1),onSave:async e=>{try{await fetch("http://localhost:5000/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"AI Template",category:"Marketing",content:e})}),f()}catch(e){console.error("AI SAVE ERROR:",e)}}})]})}},32355:function(e,t,a){"use strict";a.d(t,{BJ:function(){return u},Bv:function(){return o},PZ:function(){return d},RH:function(){return m},Vu:function(){return n},a3:function(){return i},aO:function(){return l},e8:function(){return c},fn:function(){return p},ij:function(){return x},pq:function(){return s},u6:function(){return f},wR:function(){return h}});let r="https://whatsapp-business-dashboard.onrender.com/api";async function n(e){let t=await fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Login failed");return t.json()}async function s(e,t){let a=await fetch("".concat(r,"/chats/").concat(e,"/messages/").concat(t,"/deleteForMe"),{method:"DELETE"});if(!a.ok)throw Error(await a.text());return a.json()}async function o(e,t){let a=await fetch("".concat(r,"/chats/").concat(e,"/messages/").concat(t,"/deleteForEveryone"),{method:"DELETE"});if(!a.ok)throw Error(await a.text());return a.json()}async function l(e){let t=await fetch("".concat(r,"/chats/").concat(e),{method:"DELETE"});if(!t.ok)throw Error(await t.text());return t.json()}async function i(){try{let e=await d(),t=new Set;return e.forEach(e=>{Array.isArray(e.tags)&&e.tags.forEach(e=>t.add(e))}),t.size?[...t]:["New","VIP","Lead","Returning"]}catch(e){return["New","VIP","Lead","Returning"]}}async function c(){let e=await fetch("".concat(r,"/templates"));if(!e.ok)throw Error(await e.text());return e.json()}async function d(){let e=await fetch("".concat(r,"/contacts"));if(!e.ok)throw Error(await e.text());return e.json()}async function u(e){let t=await fetch("".concat(r,"/chats/").concat(e,"/messages"));if(!t.ok)throw Error(await t.text());return t.json()}async function h(e,t){let a=await fetch("".concat(r,"/chats/").concat(e,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,from:"business"})});if(!a.ok)throw Error(await a.text());return a.json()}async function x(e,t){let a=new FormData;a.append("phone",e),a.append("file",t);let n=await fetch("".concat(r,"/chats/upload-file"),{method:"POST",body:a});if(!n.ok)throw Error(await n.text());return n.json()}async function p(){let e=await fetch("".concat(r,"/campaigns"));if(!e.ok)throw Error(await e.text());return e.json()}async function m(e){let t=await fetch("".concat(r,"/campaigns"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text());return t.json()}async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Today",t=await fetch("".concat(r,"/analytics/dashboard?range=").concat(e));if(!t.ok)throw Error(await t.text());return t.json()}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=68888)}),_N_E=e.O()}]);